<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>labeller - lbl_replace_pipe.md</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../images/logo.png" alt="">
    <span class="navbar-title">labeller</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../reference/index.html">Reference</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-articles" role="button" data-bs-toggle="dropdown" aria-expanded="false">Articles</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-articles">    
        <li>
    <a class="dropdown-item" href="../articles/README.qmd">
 <span class="dropdown-text"></span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../d"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#title" id="toc-title" class="nav-link active" data-scroll-target="#title">Title</a></li>
  <li><a href="#syntax" id="toc-syntax" class="nav-link" data-scroll-target="#syntax">Syntax</a></li>
  <li><a href="#description" id="toc-description" class="nav-link" data-scroll-target="#description">Description</a></li>
  <li><a href="#options" id="toc-options" class="nav-link" data-scroll-target="#options">Options</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  <li><a href="#feedback-bug-reports-and-contributions" id="toc-feedback-bug-reports-and-contributions" class="nav-link" data-scroll-target="#feedback-bug-reports-and-contributions">Feedback, Bug Reports, and Contributions</a></li>
  <li><a href="#authors" id="toc-authors" class="nav-link" data-scroll-target="#authors">Authors</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">lbl_replace_pipe.md</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="title" class="level1">
<h1>Title</h1>
<p><strong>lbl_replace_pipe</strong> - Replaces pipes in variable labels with user-provided value</p>
</section>
<section id="syntax" class="level1">
<h1>Syntax</h1>
<p><strong>lbl_replace_pipe</strong> , <strong>pipe</strong>(<em>string</em>) <strong><strong>rep</strong>lacement</strong>(<em>string</em>) [<strong><strong>trun</strong>cate</strong>(<em>string</em>) <strong><strong>out</strong>put_level</strong>(<em>string</em>) <strong>missing_ok</strong> <strong><strong>v</strong>arlist</strong>(<em>varlist</em>)]</p>
<table class="table">
<colgroup>
<col style="width: 45%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th><em>options</em></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>pipe</strong>(<em>string</em>)</td>
<td>The name of the pipe to be replaced</td>
</tr>
<tr class="even">
<td><strong><strong>rep</strong>lacement</strong>(<em>string</em>)</td>
<td>The value the pipe should be replaced with</td>
</tr>
<tr class="odd">
<td><strong><strong>trun</strong>cate</strong>(<em>string</em>)</td>
<td>Toggle behavior when the new label is too long</td>
</tr>
<tr class="even">
<td><strong><strong>out</strong>put_level</strong>(<em>string</em>)</td>
<td>Toggle verbosity level in output</td>
</tr>
<tr class="odd">
<td><strong>missing_ok</strong></td>
<td>Suppresses error when the pipe does not exist in any variable label</td>
</tr>
<tr class="even">
<td><strong><strong>v</strong>arlist</strong>(<em>varlist</em>)</td>
<td>Restrict the scope of variables to consider</td>
</tr>
</tbody>
</table>
</section>
<section id="description" class="level1">
<h1>Description</h1>
<p>Data collected with Survey Solutions (SuSo) commonly have pipes in the format <code>%pipename%</code> in the variable label. This command can be used to replace such pipes with a value provided by the user.</p>
<p>This command is intended to be used together with the command <code>lbl_list_pipes</code> (also in the <code>labeller</code> package). The <code>lbl_list_pipes</code> command can be used to list which pipes exist in the dataset, and then <code>lbl_replace_pipe</code> can be used to replace the pipes.</p>
<p><code>lbl_replace_pipe</code> can only replace one pipe at a time. When more than one pipe exists in a dataset, then this command is intended to be repeated once per pipe.</p>
</section>
<section id="options" class="level1">
<h1>Options</h1>
<p><strong>pipe</strong>(<em>string</em>) is the option that indicates which pipe should be replaced. This option only allows exactly one pipe at a time. It is optional to include the <code>%</code> tags, so the pipe can either be included as <code>%pipename%</code> or <code>pipename</code>.</p>
<p><strong><strong>rep</strong>lacement</strong>(<em>string</em>) is the value that the pipe should be replaced with. It can be any string allowed in a variable label. However, since variable labels in Stata are not allowed to be longer than 80 characters, the replacement value should not be too long.</p>
<p><strong><strong>trun</strong>cate</strong>(<em>string</em>) is an option that lets the user decide what should happen if a label is too long after the pipe has been replaced with the new value. The options are <code>error</code> (the command throws an error and exits), <code>warning</code> (the command outputs a warning and continues), and <code>prompt</code> (the command asks the user to interactively confirm each case). The default is <code>error</code>.</p>
<p><strong><strong>out</strong>put_level</strong>(<em>string</em>) is an option that allows the user to set how verbose the output should be. The valid values for this option are <code>minimal</code>, <code>verbose</code>, and <code>veryverbose</code>. The default is <code>verbose</code>.</p>
<p><strong>missing_ok</strong> suppresses the error thrown if a pipe the user is trying to replace does not exist in any variable label in the dataset. The default behavior is that the code is interrupted with an error if the pipe does not exist.</p>
<p><strong><strong>v</strong>arlist</strong>(<em>varlist</em>) restricts the scope of the search to the user-provided variable list. By default, the command searches for matches in all variables in memory. With <strong>varlist</strong>(), the scope of the search can be narrowed.</p>
</section>
<section id="examples" class="level1">
<h1>Examples</h1>
<p>This simple example first creates a data set where the pipe <code>%unit%</code> is added to the variable label of the variable <code>mpg</code>. Then <code>lbl_replace_pipe</code> is used to replace <code>%unit%</code> in the label with the value <code>miles per gallon</code>.</p>
<pre><code>*Create example data
sysuse auto, clear
label variable mpg "Mileage (%unit%)"

*Replace the unit pipe
lbl_replace_pipe, pipe("unit") replacement("miles per gallon") ///
   output_level(veryverbose)
</code></pre>
</section>
<section id="feedback-bug-reports-and-contributions" class="level1">
<h1>Feedback, Bug Reports, and Contributions</h1>
<p>Read more about the commands in this package at https://github.com/lsms-worldbank/labeller.</p>
<p>Please provide any feedback by opening an issue at https://github.com/lsms-worldbank/labeller/issues.</p>
<p>PRs with suggestions for improvements are also greatly appreciated.</p>
</section>
<section id="authors" class="level1">
<h1>Authors</h1>
<p>LSMS Team, The World Bank lsms@worldbank.org</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>